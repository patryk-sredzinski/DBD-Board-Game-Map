import { createContext, useContext, useState, useCallback, ReactNode } from 'react';

export type Lang = 'en' | 'pl' | 'fr' | 'de' | 'es';

export const LANGUAGES: { id: Lang; flag: string; label: string }[] = [
  { id: 'en', flag: 'üá¨üáß', label: 'English' },
  { id: 'pl', flag: 'üáµüá±', label: 'Polski' },
  { id: 'fr', flag: 'üá´üá∑', label: 'Fran√ßais' },
  { id: 'de', flag: 'üá©üá™', label: 'Deutsch' },
  { id: 'es', flag: 'üá™üá∏', label: 'Espa√±ol' },
];

/* ========== Translation strings ========== */

const translations: Record<Lang, Record<string, string>> = {
  en: {
    // Game board context menu
    changeBackground: 'Change background',
    downloadGameBoard: 'Download game board',
    downloading: 'Downloading...',
    addRoom: 'Add room',
    // Room context menu
    changeImage: 'Change image',
    connectTo: 'Connect to...',
    propTiles: 'Prop Tiles',
    deleteRoom: 'Delete room',
    roomSizeSmall: 'Small Room',
    roomSizeLarge: 'Large Room',
    // Room context menu (continued)
    initialPlacement: 'Initial Placement',
    spawnUnassigned: 'Unassigned',
    // Path context menu
    changeColor: 'Change color',
    deletePath: 'Delete path',
    pathType: 'Path type',
    // Prop tile types
    propTileObjective: 'Objectives',
    propTileBoldness: 'Boldness',
    propTileSurvival: 'Survival',
    propTileAltruism: 'Altruism',
    // Path types (movement)
    pathSneak: 'Sneak (blue)',
    pathSprint: 'Sprint (green)',
    pathCrouch: 'Crouch (red)',
    pathVault: 'Vault (yellow ‚Üí)',
    // Status bar
    connectMode: 'Connect mode ‚Äî click target room (Esc to cancel)',
    connectModeHint: 'Click on another room to connect (Esc to cancel)',
    rightClickHint: 'Right-click to open menu',
    // Game board placeholder
    gameBoardPlaceholder: 'Right-click to set background',
    // New room
    newRoom: 'Room',
    // Export error
    exportError: 'Export failed. Please try again.',
    // Validation
    validationError: 'Cannot download game board',
    validationMissingInitialPlacements: 'Missing initial placements:',
    validationMissingInitialPlacementsDesc: 'The game requires exactly 6 rooms with initial placements (0-5). Players roll a dice at the start to determine which room their character begins in.',
    validationMissingPropTiles: 'Missing prop tiles:',
    validationMissingPropTilesDesc: 'The game board must contain all prop tiles for balanced gameplay: 10 Objectives, 10 Boldness, 12 Survival, and 12 Altruism tiles distributed across rooms.',
    validationExcessPropTiles: 'Too many prop tiles:',
    validationExcessPropTilesDesc: 'Some prop tile types exceed their maximum allowed count. Reduce them to match the required amounts.',
    validationNoConnections: 'Rooms without paths:',
    validationNoConnectionsDesc: 'Every room must have at least one path connection so players can enter and exit. Rooms cannot be isolated.',
    validationMissingBreakableWalls: 'Missing breakable walls:',
    validationMissingBreakableWallsDesc: 'The game requires exactly 4 breakable walls placed on paths. These special walls can be destroyed during gameplay.',
    validationDeadEndRooms: 'Rooms with only one-way exits:',
    validationDeadEndRoomsDesc: 'These rooms only have yellow (vault) paths leading out, which are one-way. Players entering these rooms would be trapped with no way to leave.',
    validationClose: 'Close',
    success: 'Success',
    ok: 'OK',
    exportSuccess: 'Game board exported successfully!',
    downloadSuccess: 'Game board image downloaded successfully!',
    // Breakable Wall
    breakableWall: 'Breakable Wall',
    breakableWallOn: 'ON',
    breakableWallOff: 'OFF',
    // Import/Export
    exportGameBoard: 'Export game board',
    importGameBoard: 'Import game board',
    clearGameBoard: 'Clear game board',
    clearGameBoardConfirm: 'Are you sure you want to clear the entire game board? This will remove all rooms, paths, and background.',
    exportCopied: 'Game board data copied to clipboard!',
    exportCopyManual: 'Copy this data:',
    importPlaceholder: 'Paste exported game board data here...',
    importError: 'Invalid game board data format',
    cancel: 'Cancel',
    import: 'Import',
    breakableWallMaxReached: 'Maximum 4 breakable walls reached',
    // Room color
    roomColor: 'Color',
    // Sidebar
    sidebarActions: 'Actions',
    sidebarLanguage: 'Language',
    sidebarHowToUse: 'How to Use',
    sidebarInstructionDragRooms: 'Drag rooms to reposition them on the board',
    sidebarInstructionDragPaths: 'Drag path icons to bend the path route',
    sidebarInstructionDragJoins: 'Drag path endpoints to move them around the room edge',
    sidebarInstructionRightClickRoom: 'Right-click a room to edit its properties',
    sidebarInstructionRightClickPath: 'Right-click a path to change its color or add breakable walls',
    sidebarInstructionClickName: 'Click a room name to rename it',
    // Start screen
    startSubtitle: 'Map Generator',
    startDescription: 'Create custom game boards for Dead by Daylight: The Board Game. Design rooms, connect them with paths, and configure all gameplay elements.',
    startLoadExample: 'Load example map',
    startImportFile: 'Import map file',
    startFresh: 'Start with empty board',
    startCredits: 'Thanks to Karolina, Dawid and Adrian \u2014 without your ideas this board would be empty. Built with passion by Patryk.',
  },
  pl: {
    changeBackground: 'Zmie≈Ñ t≈Ço',
    downloadGameBoard: 'Pobierz planszƒô g≈Ç√≥wnƒÖ',
    downloading: 'Pobieranie...',
    addRoom: 'Dodaj lokacjƒô',
    changeImage: 'Zmie≈Ñ zdjƒôcie',
    connectTo: 'Po≈ÇƒÖcz z...',
    propTiles: 'Elementy',
    initialPlacement: 'Pozycja startowa',
    spawnUnassigned: 'Nieprzypisany',
    deleteRoom: 'Usu≈Ñ lokacjƒô',
    roomSizeSmall: 'Ma≈Ça lokacja',
    roomSizeLarge: 'Du≈ºa lokacja',
    changeColor: 'Zmie≈Ñ kolor',
    deletePath: 'Usu≈Ñ ≈õcie≈ºkƒô',
    pathType: 'Karta ruchu',
    propTileObjective: 'Cele',
    propTileBoldness: 'Odwaga',
    propTileSurvival: 'Przetrwanie',
    propTileAltruism: 'Altruizm',
    pathSneak: 'Skradaj siƒô (niebieski)',
    pathSprint: 'Biegnij (zielony)',
    pathCrouch: 'Przykucnij (czerwony)',
    pathVault: 'Przeskocz (≈º√≥≈Çty ‚Üí)',
    connectMode: 'Tryb ≈ÇƒÖczenia ‚Äî kliknij lokacjƒô docelowƒÖ (Esc aby anulowaƒá)',
    connectModeHint: 'Kliknij innƒÖ lokacjƒô, aby po≈ÇƒÖczyƒá (Esc aby anulowaƒá)',
    rightClickHint: 'Prawy przycisk myszy aby otworzyƒá menu',
    gameBoardPlaceholder: 'Kliknij prawym przyciskiem myszy, aby dodaƒá t≈Ço',
    newRoom: 'Lokacja',
    exportError: 'Eksport nie powi√≥d≈Ç siƒô. Spr√≥buj ponownie.',
    validationError: 'Nie mo≈ºna pobraƒá planszy g≈Ç√≥wnej',
    validationMissingInitialPlacements: 'BrakujƒÖce poczƒÖtkowe pozycje:',
    validationMissingInitialPlacementsDesc: 'Gra wymaga dok≈Çadnie 6 lokacji z pozycjami startowymi (0-5). Gracze rzucajƒÖ ko≈õciƒÖ na poczƒÖtku, aby okre≈õliƒá, w kt√≥rej lokacji rozpoczyna ich postaƒá.',
    validationMissingPropTiles: 'BrakujƒÖce elementy:',
    validationMissingPropTilesDesc: 'Plansza musi zawieraƒá wszystkie elementy dla zbalansowanej rozgrywki: 10 Cel√≥w, 10 Odwagi, 12 Przetrwania i 12 Altruizmu rozmieszczonych w lokacjach.',
    validationExcessPropTiles: 'Za du≈ºo element√≥w:',
    validationExcessPropTilesDesc: 'Niekt√≥re typy element√≥w przekraczajƒÖ maksymalnƒÖ dozwolonƒÖ liczbƒô. Zmniejsz je do wymaganych ilo≈õci.',
    validationNoConnections: 'Lokacje bez ≈õcie≈ºek:',
    validationNoConnectionsDesc: 'Ka≈ºda lokacja musi mieƒá co najmniej jedno po≈ÇƒÖczenie ≈õcie≈ºkƒÖ, aby gracze mogli wchodziƒá i wychodziƒá. Lokacje nie mogƒÖ byƒá izolowane.',
    validationMissingBreakableWalls: 'BrakujƒÖce nadkruszone ≈õciany:',
    validationMissingBreakableWallsDesc: 'Gra wymaga dok≈Çadnie 4 nadkruszonych ≈õcian umieszczonych na ≈õcie≈ºkach. Te specjalne ≈õciany mogƒÖ zostaƒá zniszczone podczas rozgrywki.',
    validationDeadEndRooms: 'Lokacje tylko z jednokierunkowymi wyj≈õciami:',
    validationDeadEndRoomsDesc: 'Te lokacje majƒÖ tylko ≈º√≥≈Çte ≈õcie≈ºki (przeskocz) prowadzƒÖce na zewnƒÖtrz, kt√≥re sƒÖ jednokierunkowe. Gracze wchodzƒÖcy do tych lokacji byliby uwiƒôzieni bez mo≈ºliwo≈õci wyj≈õcia.',
    validationClose: 'Zamknij',
    success: 'Sukces',
    ok: 'OK',
    exportSuccess: 'Plansza g≈Ç√≥wna zosta≈Ça wyeksportowana!',
    downloadSuccess: 'Obrazek planszy g≈Ç√≥wnej zosta≈Ç pobrany!',
    breakableWall: 'Nadkruszona ≈õciana',
    breakableWallOn: 'W≈Å',
    breakableWallOff: 'WY≈Å',
    breakableWallMaxReached: 'OsiƒÖgniƒôto maksimum 4 nadkruszonych ≈õcian',
    exportGameBoard: 'Eksportuj planszƒô g≈Ç√≥wnƒÖ',
    importGameBoard: 'Importuj planszƒô g≈Ç√≥wnƒÖ',
    clearGameBoard: 'Wyczy≈õƒá planszƒô g≈Ç√≥wnƒÖ',
    clearGameBoardConfirm: 'Czy na pewno chcesz wyczy≈õciƒá ca≈ÇƒÖ planszƒô? Spowoduje to usuniƒôcie wszystkich lokacji, ≈õcie≈ºek i t≈Ça.',
    exportCopied: 'Dane planszy g≈Ç√≥wnej skopiowane!',
    exportCopyManual: 'Skopiuj te dane:',
    importPlaceholder: 'Wklej tutaj dane planszy g≈Ç√≥wnej...',
    importError: 'Nieprawid≈Çowy format danych',
    cancel: 'Anuluj',
    import: 'Importuj',
    roomColor: 'Kolor',
    sidebarActions: 'Akcje',
    sidebarLanguage: 'Jƒôzyk',
    sidebarHowToUse: 'Jak u≈ºywaƒá',
    sidebarInstructionDragRooms: 'PrzeciƒÖgnij lokacje, aby zmieniƒá ich pozycjƒô na planszy',
    sidebarInstructionDragPaths: 'PrzeciƒÖgnij ikony ≈õcie≈ºek, aby wygiƒÖƒá trasƒô ≈õcie≈ºki',
    sidebarInstructionDragJoins: 'PrzeciƒÖgnij punkty ko≈Ñcowe ≈õcie≈ºek, aby przesunƒÖƒá je wok√≥≈Ç krawƒôdzi lokacji',
    sidebarInstructionRightClickRoom: 'Kliknij prawym przyciskiem na lokacjƒô, aby edytowaƒá jej w≈Ça≈õciwo≈õci',
    sidebarInstructionRightClickPath: 'Kliknij prawym przyciskiem na ≈õcie≈ºkƒô, aby zmieniƒá jej kolor lub dodaƒá nadkruszone ≈õciany',
    sidebarInstructionClickName: 'Kliknij nazwƒô lokacji, aby jƒÖ zmieniƒá',
    startSubtitle: 'Generator Map',
    startDescription: 'Tw√≥rz w≈Çasne plansze do gry Dead by Daylight: The Board Game. Projektuj lokacje, ≈ÇƒÖcz je ≈õcie≈ºkami i konfiguruj elementy rozgrywki.',
    startLoadExample: 'Za≈Çaduj przyk≈ÇadowƒÖ mapƒô',
    startImportFile: 'Importuj plik mapy',
    startFresh: 'Zacznij od pustej planszy',
    startCredits: 'Podziƒôkowania dla Karoliny, Dawida i Adriana \u2014 bez Waszych pomys≈Ç√≥w ta plansza by≈Çaby pusta. Zbudowane z pasji przez Patryka.',
  },
  fr: {
    changeBackground: "Changer l'arri√®re-plan",
    downloadGameBoard: 'T√©l√©charger le plateau',
    downloading: 'T√©l√©chargement...',
    addRoom: 'Ajouter une salle',
    changeImage: "Changer l'image",
    connectTo: 'Connecter √†...',
    propTiles: 'Tuiles de propri√©t√©',
    initialPlacement: 'Placement initial',
    spawnUnassigned: 'Non attribu√©',
    deleteRoom: 'Supprimer la salle',
    roomSizeSmall: 'Petite salle',
    roomSizeLarge: 'Grande salle',
    changeColor: 'Changer la couleur',
    deletePath: 'Supprimer le chemin',
    pathType: 'Type de chemin',
    propTileObjective: 'Objectifs',
    propTileBoldness: 'Audace',
    propTileSurvival: 'Survie',
    propTileAltruism: 'Altruisme',
    pathSneak: 'Furtif (bleu)',
    pathSprint: 'Sprint (vert)',
    pathCrouch: 'Accroupi (rouge)',
    pathVault: 'Saut (jaune ‚Üí)',
    connectMode: 'Mode connexion ‚Äî cliquez sur la salle cible (√âchap pour annuler)',
    connectModeHint: 'Cliquez sur une autre salle pour connecter (√âchap pour annuler)',
    rightClickHint: 'Clic droit pour ouvrir le menu',
    gameBoardPlaceholder: "Clic droit pour d√©finir l'arri√®re-plan",
    newRoom: 'Salle',
    exportError: "L'exportation a √©chou√©. Veuillez r√©essayer.",
    validationError: 'Impossible de t√©l√©charger le plateau',
    validationMissingInitialPlacements: 'Placements initiaux manquants:',
    validationMissingInitialPlacementsDesc: 'Le jeu n√©cessite exactement 6 salles avec des placements initiaux (0-5). Les joueurs lancent un d√© au d√©but pour d√©terminer dans quelle salle leur personnage commence.',
    validationMissingPropTiles: 'Tuiles de propri√©t√© manquantes:',
    validationMissingPropTilesDesc: 'Le plateau doit contenir toutes les tuiles pour un gameplay √©quilibr√©: 10 Objectifs, 10 Audace, 12 Survie et 12 Altruisme r√©partis dans les salles.',
    validationExcessPropTiles: 'Trop de tuiles de propri√©t√©:',
    validationExcessPropTilesDesc: 'Certains types de tuiles d√©passent le nombre maximum autoris√©. R√©duisez-les pour correspondre aux quantit√©s requises.',
    validationNoConnections: 'Salles sans chemins:',
    validationNoConnectionsDesc: 'Chaque salle doit avoir au moins une connexion de chemin pour que les joueurs puissent entrer et sortir. Les salles ne peuvent pas √™tre isol√©es.',
    validationMissingBreakableWalls: 'Murs cassables manquants:',
    validationMissingBreakableWallsDesc: 'Le jeu n√©cessite exactement 4 murs cassables plac√©s sur les chemins. Ces murs sp√©ciaux peuvent √™tre d√©truits pendant le jeu.',
    validationDeadEndRooms: 'Salles avec sorties unidirectionnelles uniquement:',
    validationDeadEndRoomsDesc: 'Ces salles n\'ont que des chemins jaunes (saut) menant vers l\'ext√©rieur, qui sont √† sens unique. Les joueurs entrant dans ces salles seraient pi√©g√©s sans moyen de sortir.',
    validationClose: 'Fermer',
    success: 'Succ√®s',
    ok: 'OK',
    exportSuccess: 'Plateau de jeu export√© avec succ√®s!',
    downloadSuccess: 'Image du plateau t√©l√©charg√©e avec succ√®s!',
    breakableWall: 'Mur cassable',
    breakableWallOn: 'OUI',
    breakableWallOff: 'NON',
    breakableWallMaxReached: 'Maximum 4 murs cassables atteint',
    exportGameBoard: 'Exporter le plateau',
    importGameBoard: 'Importer le plateau',
    clearGameBoard: 'Effacer le plateau',
    clearGameBoardConfirm: '√ätes-vous s√ªr de vouloir effacer tout le plateau? Cela supprimera toutes les salles, chemins et l\'arri√®re-plan.',
    exportCopied: 'Donn√©es du plateau copi√©es!',
    exportCopyManual: 'Copiez ces donn√©es:',
    importPlaceholder: 'Collez les donn√©es du plateau ici...',
    importError: 'Format de donn√©es invalide',
    cancel: 'Annuler',
    import: 'Importer',
    roomColor: 'Couleur',
    sidebarActions: 'Actions',
    sidebarLanguage: 'Langue',
    sidebarHowToUse: 'Comment utiliser',
    sidebarInstructionDragRooms: 'Faites glisser les salles pour les repositionner sur le plateau',
    sidebarInstructionDragPaths: 'Faites glisser les ic√¥nes de chemin pour courber l\'itin√©raire',
    sidebarInstructionDragJoins: 'Faites glisser les extr√©mit√©s des chemins pour les d√©placer autour du bord de la salle',
    sidebarInstructionRightClickRoom: 'Clic droit sur une salle pour modifier ses propri√©t√©s',
    sidebarInstructionRightClickPath: 'Clic droit sur un chemin pour changer sa couleur ou ajouter des murs cassables',
    sidebarInstructionClickName: 'Cliquez sur le nom d\'une salle pour la renommer',
    startSubtitle: 'G√©n√©rateur de cartes',
    startDescription: 'Cr√©ez des plateaux de jeu personnalis√©s pour Dead by Daylight: The Board Game. Concevez des salles, reliez-les par des chemins et configurez tous les √©l√©ments de jeu.',
    startLoadExample: 'Charger une carte exemple',
    startImportFile: 'Importer un fichier de carte',
    startFresh: 'Commencer avec un plateau vide',
    startCredits: 'Merci √† Karolina, Dawid et Adrian \u2014 sans vos id√©es, ce plateau serait vide. Construit avec passion par Patryk.',
  },
  de: {
    changeBackground: 'Hintergrund √§ndern',
    downloadGameBoard: 'Spielbrett herunterladen',
    downloading: 'Herunterladen...',
    addRoom: 'Raum hinzuf√ºgen',
    changeImage: 'Bild √§ndern',
    connectTo: 'Verbinden mit...',
    propTiles: 'Eigenschaftskacheln',
    initialPlacement: 'Anfangsplatzierung',
    spawnUnassigned: 'Nicht zugewiesen',
    deleteRoom: 'Raum l√∂schen',
    roomSizeSmall: 'Kleiner Raum',
    roomSizeLarge: 'Gro√üer Raum',
    changeColor: 'Farbe √§ndern',
    deletePath: 'Pfad l√∂schen',
    pathType: 'Pfadtyp',
    propTileObjective: 'Ziele',
    propTileBoldness: 'K√ºhnheit',
    propTileSurvival: '√úberleben',
    propTileAltruism: 'Altruismus',
    pathSneak: 'Schleichen (blau)',
    pathSprint: 'Sprint (gr√ºn)',
    pathCrouch: 'Ducken (rot)',
    pathVault: 'Springen (gelb ‚Üí)',
    connectMode: 'Verbindungsmodus ‚Äî Klicken Sie auf den Zielraum (Esc zum Abbrechen)',
    connectModeHint: 'Klicken Sie auf einen anderen Raum zum Verbinden (Esc zum Abbrechen)',
    rightClickHint: 'Rechtsklick zum √ñffnen des Men√ºs',
    gameBoardPlaceholder: 'Rechtsklick um Hintergrund festzulegen',
    newRoom: 'Raum',
    exportError: 'Export fehlgeschlagen. Bitte versuchen Sie es erneut.',
    validationError: 'Spielbrett kann nicht heruntergeladen werden',
    validationMissingInitialPlacements: 'Fehlende Anfangsplatzierungen:',
    validationMissingInitialPlacementsDesc: 'Das Spiel erfordert genau 6 R√§ume mit Anfangsplatzierungen (0-5). Die Spieler w√ºrfeln zu Beginn, um zu bestimmen, in welchem Raum ihre Figur startet.',
    validationMissingPropTiles: 'Fehlende Eigenschaftskacheln:',
    validationMissingPropTilesDesc: 'Das Spielbrett muss alle Eigenschaftskacheln f√ºr ausgewogenes Gameplay enthalten: 10 Ziele, 10 K√ºhnheit, 12 √úberleben und 12 Altruismus verteilt auf die R√§ume.',
    validationExcessPropTiles: 'Zu viele Eigenschaftskacheln:',
    validationExcessPropTilesDesc: 'Einige Eigenschaftskachel-Typen √ºberschreiten die maximal erlaubte Anzahl. Reduzieren Sie sie auf die erforderlichen Mengen.',
    validationNoConnections: 'R√§ume ohne Pfade:',
    validationNoConnectionsDesc: 'Jeder Raum muss mindestens eine Pfadverbindung haben, damit Spieler ein- und ausgehen k√∂nnen. R√§ume d√ºrfen nicht isoliert sein.',
    validationMissingBreakableWalls: 'Fehlende zerbrechliche W√§nde:',
    validationMissingBreakableWallsDesc: 'Das Spiel erfordert genau 4 zerbrechliche W√§nde auf Pfaden. Diese speziellen W√§nde k√∂nnen w√§hrend des Spiels zerst√∂rt werden.',
    validationDeadEndRooms: 'R√§ume mit nur Einweg-Ausg√§ngen:',
    validationDeadEndRoomsDesc: 'Diese R√§ume haben nur gelbe (Sprung) Pfade, die nach au√üen f√ºhren, welche Einwegpfade sind. Spieler, die diese R√§ume betreten, w√§ren ohne Ausweg gefangen.',
    validationClose: 'Schlie√üen',
    success: 'Erfolg',
    ok: 'OK',
    exportSuccess: 'Spielbrett erfolgreich exportiert!',
    downloadSuccess: 'Spielbrett-Bild erfolgreich heruntergeladen!',
    breakableWall: 'Zerbrechliche Wand',
    breakableWallOn: 'AN',
    breakableWallOff: 'AUS',
    breakableWallMaxReached: 'Maximal 4 zerbrechliche W√§nde erreicht',
    exportGameBoard: 'Spielbrett exportieren',
    importGameBoard: 'Spielbrett importieren',
    clearGameBoard: 'Spielbrett leeren',
    clearGameBoardConfirm: 'Sind Sie sicher, dass Sie das gesamte Spielbrett leeren m√∂chten? Alle R√§ume, Pfade und der Hintergrund werden entfernt.',
    exportCopied: 'Spielbrettdaten kopiert!',
    exportCopyManual: 'Kopieren Sie diese Daten:',
    importPlaceholder: 'Spielbrettdaten hier einf√ºgen...',
    importError: 'Ung√ºltiges Datenformat',
    cancel: 'Abbrechen',
    import: 'Importieren',
    roomColor: 'Farbe',
    sidebarActions: 'Aktionen',
    sidebarLanguage: 'Sprache',
    sidebarHowToUse: 'Anleitung',
    sidebarInstructionDragRooms: 'Ziehen Sie R√§ume, um sie auf dem Spielbrett zu verschieben',
    sidebarInstructionDragPaths: 'Ziehen Sie Pfadsymbole, um die Pfadroute zu biegen',
    sidebarInstructionDragJoins: 'Ziehen Sie Pfadendpunkte, um sie am Raumrand zu verschieben',
    sidebarInstructionRightClickRoom: 'Rechtsklick auf einen Raum, um seine Eigenschaften zu bearbeiten',
    sidebarInstructionRightClickPath: 'Rechtsklick auf einen Pfad, um seine Farbe zu √§ndern oder zerbrechliche W√§nde hinzuzuf√ºgen',
    sidebarInstructionClickName: 'Klicken Sie auf einen Raumnamen, um ihn umzubenennen',
    startSubtitle: 'Karten-Generator',
    startDescription: 'Erstellen Sie individuelle Spielbretter f√ºr Dead by Daylight: The Board Game. Entwerfen Sie R√§ume, verbinden Sie sie mit Pfaden und konfigurieren Sie alle Spielelemente.',
    startLoadExample: 'Beispielkarte laden',
    startImportFile: 'Kartendatei importieren',
    startFresh: 'Mit leerem Spielbrett starten',
    startCredits: 'Danke an Karolina, Dawid und Adrian \u2014 ohne eure Ideen w√§re dieses Spielbrett leer. Mit Leidenschaft gebaut von Patryk.',
  },
  es: {
    changeBackground: 'Cambiar fondo',
    downloadGameBoard: 'Descargar tablero',
    downloading: 'Descargando...',
    addRoom: 'A√±adir sala',
    changeImage: 'Cambiar imagen',
    connectTo: 'Conectar con...',
    propTiles: 'Losetas de propiedad',
    initialPlacement: 'Colocaci√≥n inicial',
    spawnUnassigned: 'Sin asignar',
    deleteRoom: 'Eliminar sala',
    roomSizeSmall: 'Sala peque√±a',
    roomSizeLarge: 'Sala grande',
    changeColor: 'Cambiar color',
    deletePath: 'Eliminar camino',
    pathType: 'Tipo de camino',
    propTileObjective: 'Objetivos',
    propTileBoldness: 'Audacia',
    propTileSurvival: 'Supervivencia',
    propTileAltruism: 'Altruismo',
    pathSneak: 'Sigilo (azul)',
    pathSprint: 'Sprint (verde)',
    pathCrouch: 'Agacharse (rojo)',
    pathVault: 'Saltar (amarillo ‚Üí)',
    connectMode: 'Modo conexi√≥n ‚Äî haz clic en la sala destino (Esc para cancelar)',
    connectModeHint: 'Haz clic en otra sala para conectar (Esc para cancelar)',
    rightClickHint: 'Clic derecho para abrir el men√∫',
    gameBoardPlaceholder: 'Clic derecho para establecer el fondo',
    newRoom: 'Sala',
    exportError: 'La exportaci√≥n fall√≥. Int√©ntalo de nuevo.',
    validationError: 'No se puede descargar el tablero',
    validationMissingInitialPlacements: 'Colocaciones iniciales faltantes:',
    validationMissingInitialPlacementsDesc: 'El juego requiere exactamente 6 salas con colocaciones iniciales (0-5). Los jugadores tiran un dado al inicio para determinar en qu√© sala comienza su personaje.',
    validationMissingPropTiles: 'Losetas de propiedad faltantes:',
    validationMissingPropTilesDesc: 'El tablero debe contener todas las losetas para un juego equilibrado: 10 Objetivos, 10 Audacia, 12 Supervivencia y 12 Altruismo distribuidos en las salas.',
    validationExcessPropTiles: 'Demasiadas losetas de propiedad:',
    validationExcessPropTilesDesc: 'Algunos tipos de losetas exceden el n√∫mero m√°ximo permitido. Red√∫celos para que coincidan con las cantidades requeridas.',
    validationNoConnections: 'Salas sin caminos:',
    validationNoConnectionsDesc: 'Cada sala debe tener al menos una conexi√≥n de camino para que los jugadores puedan entrar y salir. Las salas no pueden estar aisladas.',
    validationMissingBreakableWalls: 'Paredes rompibles faltantes:',
    validationMissingBreakableWallsDesc: 'El juego requiere exactamente 4 paredes rompibles colocadas en caminos. Estas paredes especiales pueden ser destruidas durante el juego.',
    validationDeadEndRooms: 'Salas con solo salidas unidireccionales:',
    validationDeadEndRoomsDesc: 'Estas salas solo tienen caminos amarillos (salto) que llevan hacia afuera, que son unidireccionales. Los jugadores que entren en estas salas quedar√≠an atrapados sin forma de salir.',
    validationClose: 'Cerrar',
    success: '√âxito',
    ok: 'OK',
    exportSuccess: '¬°Tablero de juego exportado con √©xito!',
    downloadSuccess: '¬°Imagen del tablero descargada con √©xito!',
    breakableWall: 'Pared rompible',
    breakableWallOn: 'S√ç',
    breakableWallOff: 'NO',
    breakableWallMaxReached: 'M√°ximo 4 paredes rompibles alcanzado',
    exportGameBoard: 'Exportar tablero',
    importGameBoard: 'Importar tablero',
    clearGameBoard: 'Limpiar tablero',
    clearGameBoardConfirm: '¬øEst√°s seguro de que quieres limpiar todo el tablero? Esto eliminar√° todas las salas, caminos y el fondo.',
    exportCopied: '¬°Datos del tablero copiados!',
    exportCopyManual: 'Copie estos datos:',
    importPlaceholder: 'Pegue los datos del tablero aqu√≠...',
    importError: 'Formato de datos inv√°lido',
    cancel: 'Cancelar',
    import: 'Importar',
    roomColor: 'Color',
    sidebarActions: 'Acciones',
    sidebarLanguage: 'Idioma',
    sidebarHowToUse: 'C√≥mo usar',
    sidebarInstructionDragRooms: 'Arrastra las salas para reposicionarlas en el tablero',
    sidebarInstructionDragPaths: 'Arrastra los √≠conos de camino para curvar la ruta',
    sidebarInstructionDragJoins: 'Arrastra los extremos de los caminos para moverlos alrededor del borde de la sala',
    sidebarInstructionRightClickRoom: 'Clic derecho en una sala para editar sus propiedades',
    sidebarInstructionRightClickPath: 'Clic derecho en un camino para cambiar su color o a√±adir paredes rompibles',
    sidebarInstructionClickName: 'Haz clic en el nombre de una sala para renombrarla',
    startSubtitle: 'Generador de mapas',
    startDescription: 'Crea tableros de juego personalizados para Dead by Daylight: The Board Game. Dise√±a salas, con√©ctalas con caminos y configura todos los elementos del juego.',
    startLoadExample: 'Cargar mapa de ejemplo',
    startImportFile: 'Importar archivo de mapa',
    startFresh: 'Empezar con tablero vac√≠o',
    startCredits: 'Gracias a Karolina, Dawid y Adrian \u2014 sin vuestras ideas este tablero estar√≠a vac√≠o. Construido con pasi√≥n por Patryk.',
  },
};

/* ========== Prop Tile / Path label helpers ========== */

export type PropTileType = 'objective' | 'boldness' | 'survival' | 'altruism';
export type PathType = 'red' | 'green' | 'blue' | 'yellow';

const PROP_TILE_KEYS: Record<PropTileType, string> = {
  objective: 'propTileObjective',
  boldness: 'propTileBoldness',
  survival: 'propTileSurvival',
  altruism: 'propTileAltruism',
};

const PATH_KEYS: Record<PathType, string> = {
  red: 'pathCrouch',
  green: 'pathSprint',
  blue: 'pathSneak',
  yellow: 'pathVault',
};

/* ========== Context ========== */

interface I18nContextValue {
  lang: Lang;
  setLang: (lang: Lang) => void;
  t: Record<string, string>;
  propTileLabel: (type: PropTileType) => string;
  pathLabel: (color: PathType) => string;
}

const I18nContext = createContext<I18nContextValue>({
  lang: 'en',
  setLang: () => {},
  t: translations.en,
  propTileLabel: (type) => translations.en[PROP_TILE_KEYS[type]],
  pathLabel: (color) => translations.en[PATH_KEYS[color]],
});

export function I18nProvider({ children }: { children: ReactNode }) {
  const [lang, setLangState] = useState<Lang>('pl');

  const setLang = useCallback((l: Lang) => setLangState(l), []);

  const t = translations[lang];

  const propTileLabel = useCallback(
    (type: PropTileType) => translations[lang][PROP_TILE_KEYS[type]],
    [lang]
  );

  const pathLabel = useCallback(
    (color: PathType) => translations[lang][PATH_KEYS[color]],
    [lang]
  );

  return (
    <I18nContext.Provider value={{ lang, setLang, t, propTileLabel, pathLabel }}>
      {children}
    </I18nContext.Provider>
  );
}

export function useI18n() {
  return useContext(I18nContext);
}
